import time
import imagezmq
import socket
from imutils.video import VideoStream

sender = imagezmq.ImageSender(connect_to="tcp://192.168.36.25:50000")
rpi_name = socket.gethostname()
picam = VideoStream(usePiCamera=True).start()
print("[Main] Video stream started")
time.sleep(1.0)
while True:
    image = picam.read()
    print("Sending Image")
    result = sender.send_image(rpi_name, image)
    print("[Main] Received result:", result)
    if b'38' in result:
        print("Received right arrow")
    elif b'39' in result:
        print("Received left arrow")
